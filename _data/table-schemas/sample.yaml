title: Sample
description: >
  Sampling events during a campaign, with a specific methodology. Use separate sample records when 
  multiple observers are producing independent data streams.
fields:
  - name: RecordType
    description: >
      Record type. Use `ES` for Sample records.
    type: string
    constraints:
      required: true
      pattern: 'ES'

  - name: CampaignID
    description: >
      Unique identifier of the campaign this sample belongs to.
    type: string
    format: default
    constraints:
      required: true
      maxLength: 50

  - name: SampleID
    description: >
      Unique identifier for the sample.
    type: string
    format: default
    constraints:
      required: true
      unique: true
      maxLength: 50

  - name: Date
    description: >
      Sampling date. Format: `yyyy-mm-dd`.
    type: date
    format: default
    constraints:
      required: true

  - name: PlatformCode
    description: >
      Platform used for sampling. Uses the [SHIPC](https://vocab.ices.dk/?ref=315) vocabulary.
    type: string
    format: default
    constraints:
      required: true
      maxLength: 6

  - name: PlatformClass
    description: |
      Type of the platform used for sampling. Uses the 
      [Platform Class](https://vocab.ices.dk/?ref=311) vocabulary:
      - `30` [Ship](https://vocab.ices.dk/?CodeID=120897)
      - `62` [Aeroplane](https://vocab.ices.dk/?CodeID=137773)
      - `62` [Helicopter](https://vocab.ices.dk/?CodeID=120899)
    type: string
    format: default
    constraints:
      required: true
      maxLength: 2
      enum:
        - '30' # Previously: 1
        - '62' # Previously: 3 and 4
        - '67' # Previously: 2

  - name: PlatformSide
    description: |
      Side of the platform used for sampling. Uses the
      [PlatformSide](http://vocab.ices.dk/?ref=1688) vocabulary:
      - `right` Starboard
      - `right front`
      - `right back`
      - `left` Port
      - `left front`
      - `left back`
      - `both` Observers on both sides producing one collective data stream
    type: string
    format: default
    constraints:
      required: false
      maxLength: 15
      enum:
        - right       # Previously: 6
        - right front # Previously: 1
        - right back  # Previously: 3
        - left        # Previously: 5
        - left front  # Previously: 4
        - left back   # Previously: 2
        - both        # Previously: 9

  - name: PlatformHeight
    description: >
      Height (m) of the platform during sampling, e.g. average flying height of aeroplane.
    type: number
    format: default
    constraints:
      required: false

  - name: TransectWidth
    description: >
      Width of the sampling transect (m).
    type: integer
    format: default
    constraints:
      required: true
 
  - name: SamplingMethod
    description: |
      Sampling method. Uses the 
      [BD_CountMethod](https://vocab.ices.dk/?CodeTypeRelID=1440&CodeID=235388) vocabulary:
      - `1` Full ship-based transect method with snapshot for flying birds
      - `2` Full ship-based transect method, no snapshot for flying birds
      - `3` All observations, but no transect operated
      - `4` Presence/absence data
      - `5` Full ship-based transect method with snapshot for flying birds, but no scan data for outside the transect
      - `6` Ship-based strip transect, no snapshot, no distance estimation
      - `7` Ship-based strip transect, with snapshot, no distance estimation
      - `8` Visual aerial line transect method with distance sampling
      - `9` Visual aerial strip transect, no distance estimation
      - `10` Visual aerial total counts
      - `11` Digital aerial – video
      - `12` Digital aerial – stills
    type: string
    format: default
    constraints:
      required: true
      maxLength: 10
      enum:
        - '1'
        - '2'
        - '3'
        - '4'
        - '5'
        - '6'
        - '7'
        - '8'
        - '9'
        - '10'
        - '11'
        - '12'

  - name: PrimarySampling
    description: >
      Whether the sample should be considered primary (`true`) or ancillary (`false`) in case of 
      double or triple observer sampling.
    type: boolean
    format: default
    constraints:
      required: false

  - name: TargetTaxa
    description: |
      Species (groups) that were counted during sampling. Uses the 
      [TargetTaxa](http://vocab.ices.dk/?ref=1713) vocabulary:
      - `1` All species recorded (standard)
      - `2` All species except Larus gulls
      - `3` All species except fulmars
      - `4` All species except Larus gulls, fulmars and kittiwakes
      - `5` Auks only
      - `6` Auks and seaduck only
      - `7` All species except eiders and gulls
      - `8` All species except gannets
      - `9` Auks and unusual seabirds only
      - `10` All species except auks and divers
      - `11` All species except small gulls (Little, Black-headed & Common Gull/Black-legged Kittiwake)
      - `12` All species except Lesser Black-backed Gulls
      - `13` All species except seaduck and divers
      - `14` All species except gannets, fulmars and kittiwakes
      - `15` All species except fulmars and gannets
      - `16` Cetaceans only
      - `17` Auks, divers, grebes and seaduck only
      - `18` Cetaceans and rare birds only
      - `99` Other
    type: string
    format: default
    constraints:
      required: true
      maxLength: 3
      enum:
        - '1'
        - '2'
        - '3'
        - '4'
        - '5'
        - '6'
        - '7'
        - '8'
        - '9'
        - '10'
        - '11'
        - '12'
        - '13'
        - '14'
        - '15'
        - '16'
        - '17'
        - '18'
        - '99'

  - name: DistanceBins
    description: >
      List of distance bin boundaries applied during sampling and to be used for distance analyses. 
      Format: `x|x|...|x`. For typical ship-based sampling using a 300 m wide transect this would 
      be `0|50|100|200|300`.
    type: string
    format: default
    constraints:
      required: false
      maxLength: 100
      pattern: '(\d+\|)+\d+'

  - name: UseOfBinoculars
    description: |
      Extent to which binoculars were used during sampling. Uses the 
      [UseOfBinoculars](http://vocab.ices.dk/?ref=1719) vocabulary:
      - `1` No binoculars used
      - `2` Binoculars used for scanning far ahead of the platform (e.g. for seaduck and diver monitoring)
      - `3` Binoculars used extensively for scanning ahead and to the side, naked eye used for close observations (e.g. for cetacean monitoring)
    type: string
    format: default
    constraints:
      required: false
      maxLength: 2
      enum:
        - '1'
        - '2'
        - '3'

  - name: NumberOfObservers
    description: >
      Number of observers that contributed to the sample.
    type: integer
    format: default
    constraints:
      required: false

  - name: Notes
    description: >
      Additional details related to the sample, such as the name of the ship if no `SHIPC` code 
      exists.
    type: string
    format: default
    constraints:
      required: false
      maxLength: 300

missingValues:
  - ''
  - NA
primaryKey: SampleID
foreignKeys:
  - fields: CampaignID
    reference:
      resource: campaigns
      fields: CampaignID

